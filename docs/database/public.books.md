# public.books

## Description

## Columns

| Name | Type | Default | Nullable | Children | Parents | Comment |
| ---- | ---- | ------- | -------- | -------- | ------- | ------- |
| id | uuid |  | false | [public.pages](public.pages.md) [public.book_attributes](public.book_attributes.md) [public.book_labels](public.book_labels.md) [public.book_origin_attributes](public.book_origin_attributes.md) [public.deleted_pages](public.deleted_pages.md) |  |  |
| name | text |  | true |  |  |  |
| origin_url | text |  | true |  |  |  |
| page_count | integer |  | true |  |  |  |
| attributes_parsed | boolean | false | false |  |  |  |
| create_at | timestamp with time zone |  | false |  |  |  |
| deleted | boolean | false | false |  |  |  |
| deleted_at | timestamp with time zone |  | true |  |  |  |
| verified | boolean | false | false |  |  |  |
| verified_at | timestamp with time zone |  | true |  |  |  |
| is_rebuild | boolean | false | false |  |  |  |

## Constraints

| Name | Type | Definition |
| ---- | ---- | ---------- |
| books_pkey | PRIMARY KEY | PRIMARY KEY (id) |

## Indexes

| Name | Definition |
| ---- | ---------- |
| books_pkey | CREATE UNIQUE INDEX books_pkey ON public.books USING btree (id) |
| unparsed_books | CREATE INDEX unparsed_books ON public.books USING btree (id) WHERE (((name IS NULL) OR (page_count IS NULL) OR (attributes_parsed = false)) AND (origin_url IS NOT NULL) AND (deleted = false)) |
| unverified_books | CREATE INDEX unverified_books ON public.books USING btree (id) WHERE (verified = false) |
| book_origin_url | CREATE INDEX book_origin_url ON public.books USING hash (origin_url) WHERE (origin_url IS NOT NULL) |
| book_is_rebuild | CREATE INDEX book_is_rebuild ON public.books USING btree (id) WHERE (is_rebuild = true) |
| book_is_deleted | CREATE INDEX book_is_deleted ON public.books USING btree (id) WHERE (deleted = true) |

## Relations

```mermaid
erDiagram

"public.pages" }o--|| "public.books" : "FOREIGN KEY (book_id) REFERENCES books(id) ON UPDATE CASCADE ON DELETE CASCADE"
"public.book_attributes" }o--|| "public.books" : "FOREIGN KEY (book_id) REFERENCES books(id) ON UPDATE CASCADE ON DELETE CASCADE"
"public.book_labels" }o--|| "public.books" : "FOREIGN KEY (book_id) REFERENCES books(id) ON UPDATE CASCADE ON DELETE CASCADE"
"public.book_origin_attributes" }o--|| "public.books" : "FOREIGN KEY (book_id) REFERENCES books(id) ON UPDATE CASCADE ON DELETE CASCADE"
"public.deleted_pages" }o--|| "public.books" : "FOREIGN KEY (book_id) REFERENCES books(id) ON UPDATE CASCADE ON DELETE CASCADE"

"public.books" {
  uuid id
  text name
  text origin_url
  integer page_count
  boolean attributes_parsed
  timestamp_with_time_zone create_at
  boolean deleted
  timestamp_with_time_zone deleted_at
  boolean verified
  timestamp_with_time_zone verified_at
  boolean is_rebuild
}
"public.pages" {
  uuid book_id FK
  integer page_number
  text ext
  text origin_url
  timestamp_with_time_zone create_at
  boolean downloaded
  timestamp_with_time_zone load_at
  uuid file_id FK
}
"public.book_attributes" {
  uuid book_id FK
  text attr FK
  text value
}
"public.book_labels" {
  uuid book_id FK
  integer page_number
  text name
  text value
  timestamp_with_time_zone create_at
}
"public.book_origin_attributes" {
  uuid book_id FK
  text attr FK
  text__ values
}
"public.deleted_pages" {
  uuid book_id FK
  integer page_number
  text ext
  text origin_url
  text md5_sum
  text sha256_sum
  bigint size
  boolean downloaded
  timestamp_with_time_zone created_at
  timestamp_with_time_zone loaded_at
  timestamp_with_time_zone deleted_at
}
```

---

> Generated by [tbls](https://github.com/k1LoW/tbls)
